<html lang="en" style="padding: 20px">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.9.3/semantic.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/v/se/jszip-3.10.1/dt-2.0.7/b-3.0.2/b-colvis-3.0.2/b-html5-3.0.2/b-print-3.0.2/cr-2.0.2/date-1.5.2/fc-5.0.0/fh-4.0.1/kt-2.12.0/r-3.0.2/rg-1.5.0/sc-2.4.2/sb-1.7.1/sp-2.3.1/datatables.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.9.3/semantic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/v/se/jszip-3.10.1/dt-2.0.7/b-3.0.2/b-colvis-3.0.2/b-html5-3.0.2/b-print-3.0.2/cr-2.0.2/date-1.5.2/fc-5.0.0/fh-4.0.1/kt-2.12.0/r-3.0.2/rg-1.5.0/sc-2.4.2/sb-1.7.1/sp-2.3.1/datatables.min.js"></script>
    <script type="text/javascript" src="script/cfg-tables.js"></script>
    <script type="text/javascript" src="script/cfg-tabs.js"></script>
    <script type="text/javascript" src="script/cfg-sfdc-tokens.js"></script>
    <script type="text/javascript" src="20.ObjectSchema.js"></script>
    <title>Object Schema</title>
    <style>
      #collectionsTable tbody tr {
        cursor: pointer;
      }
      #collectionsTable tbody tr:hover {
        background-color: whitesmoke;
      }
    </style>
  </head>
  <body>
    <h2 class="ui header">SObjects</h2>
    <table id="collectionsTable" class="ui celled table">
      <thead>
        <tr class="header">
          <th>Name</th>
          <th>Label</th>
          <th>Key Prefix</th>
          <th>Fields</th>
          <th>Action Overrides</th>
          <th>Child Relationships</th>
          <th>Record Types</th>
          <th>Supported Scopes</th>
          <th>Validation Rules</th>
          <th>Customized</th>
        </tr>
      </thead>
    </table>
    <div id="details" style="margin-top: 20px">
      <div id="tab-menu" class="ui top attached tabular menu">
        <a id="tab-menu-current" class="active item" data-tab="tab-current">
          <i>Current</i>
        </a>
      </div>
      <div
        id="tab-current"
        class="ui bottom attached active tab segment"
        data-tab="tab-current"
      >
        <!--Container to display the current object.-->
      </div>
    </div>
    <script>
      function renderObjectName(data, type, row, meta) {
        if (type === "display") {
          return (
            `<div style="display: flex; align-items: center; gap: 8px;">
              <div class="name">${data}</div>` +
            (row.customObject
              ? `<div class="ui basic tiny green label">customized</div>`
              : "") +
            `</div>`
          );
        } else {
          return data;
        }
      }

      function renderValidationRuleName(data, type, row, meta) {
        if (type === "display") {
          return (
            `<div class="name">${data}</div>` +
            (row.active ? `<div class="ui green label">active</div>` : "")
          );
        } else {
          return data;
        }
      }

      function renderPropertyCount(propertyName) {
        return function (data, type, row, meta) {
          const count = row[propertyName] ? row[propertyName].length : 0;
          if (type === "display") {
            return count;
          } else {
            return count;
          }
        };
      }

      function renderOptionalValue(propertyName) {
        return function (data, type, row, meta) {
          if (!row || !row[propertyName]) {
            return null;
          }
          return row[propertyName];
        };
      }

      function renderJunction(data, type, row, meta) {
        const junction = row ? row.junction : null;
        if (!junction) {
          return null;
        }
        if (type !== "display") {
          return junction;
        }
        const lists = Array.isArray(junction.idListNames)
          ? junction.idListNames
              .map(
                (name) => `<div class="ui secondary basic label">${name}</div>`
              )
              .join("")
          : "";
        const refs = Array.isArray(junction.referenceTo)
          ? junction.referenceTo
              .map(
                (target) =>
                  `<a class="ui primary basic label" onclick="addAndDisplayDetails('${target}', false, false)" ondblclick="addAndDisplayDetails('${target}', true, true)"><i class="arrow right icon"></i>${target}</a>`
              )
              .join("")
          : "";
        const listsSection = lists
          ? `<div>lists <span class="ui labels">${lists}</span></div>`
          : "";
        const refsSection = refs
          ? `<div style="margin-top: 4px;">references <span class="ui labels">${refs}</span></div>`
          : "";
        return `<div>${listsSection}${refsSection}</div>`;
      }

      function decodePicklistText(value) {
        // Safely decode URL-encoded sequences like %28 %29; fall back on original if invalid
        try {
          return decodeURIComponent(value);
        } catch (e) {
          return value;
        }
      }

      // Object Schema specific content generation
      function generateObjectDetailsHtml(tabId, data) {
        let keyPrefixSection = "";
        if (data.keyPrefix !== "") {
          keyPrefixSection = `
            <tr>
              <td>Key Prefix</td>
              <td>${data.keyPrefix}</td>
            </tr>`;
        }

        let flagsSection = data.flags
          .map((flag) => `<div class="item">${flag}</div>`)
          .join("");

        let customObjectSection = "";
        if (data.customObject) {
          customObjectSection = `
            <tr>
              <td>Customized</td>
              <td>true</td>
            </tr>`;
        }

        let topSection = `
          <h2 class='ui header'>${data.name}</h2>
          <table class="ui very basic collapsing celled table">
            <tbody>
              <tr>
                <td>Label</td>
                <td>${data.label}</td>
              </tr>
              <tr>
                <td>Label Plural</td>
                <td>${data.labelPlural}</td>
              </tr>
              ${keyPrefixSection}
              <tr>
                <td>Flags</td>
                <td>
                  <div class="ui horizontal list">
                    ${flagsSection}
                  </div>
                </td>
              </tr>
              <!-- TODO: Reinstate these when we have meaningful URLs available
              <tr>
                <td>URL Detail</td>
                <td>${data.urlDetail}</td>
              </tr>
              <tr>
                <td>URL Edit</td>
                <td>${data.urlEdit}</td>
              </tr>
              <tr>
                <td>URL New</td>
                <td>${data.urlNew}</td>
              </tr>
              -->
              ${customObjectSection}
            </tbody>
          </table>`;

        let linksSection = `<div class="ui horizontal list"><div class="item"><a href="#${tabId}-fields">Fields</a></div>`;

        let fieldsSectionHeader = `
          <h3 class='ui header' id='${tabId}-fields'>Fields</h3>
          <table id='${tabId}-fields-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Name</th>
                <th>Label</th>
                <th>Type</th>
                <th>Flags</th>
                <th>Customized</th>
              </tr>
            </thead>
            <tbody>`;

        let fieldsSection = data.fields
          .map((field) => {
            let name = field.name;
            if (field.flags.includes("nameField")) {
              name = `<h4 class='ui header'>${field.name}</h4>`;
            }

            let type = field.type;
            if (type !== null && typeof type === "object") {
              if (type.type === "picklist") {
                type =
                  `<div>picklist <span class="ui labels">` +
                  type.values
                    .map(
                      (value) =>
                        `<div class="ui secondary basic label">${value}</div>`
                    )
                    .join("") +
                  "</span></div>";
              } else if (type.type === "reference") {
                type =
                  `<div>reference <span class="ui labels">` +
                  type.targets
                    .map(
                      (target) =>
                        `<a class="ui primary basic label"
                          onclick="addAndDisplayDetails('${target}', false, false)"
                          ondblclick="addAndDisplayDetails('${target}', true, true)">
                          <i class="arrow right icon"></i>${target}
                        </a>`
                    )
                    .join("") +
                  "</span></div>";
              }
            }

            let flagsSection = field.flags
              .map(
                (flag) =>
                  `<div class="ui green basic label"><i class="check icon"></i>${flag}</div>`
              )
              .join("");

            return `
              <tr>
                <td>${name}</td>
                <td>${field.label}</td>
                <td>${type}</td>
                <td>
                  <div class="ui labels">
                    ${flagsSection}
                  </div>
                </td>
                <td>${field.custom}</td>
              </tr>`;
          })
          .join("");

        let fieldsSectionFooter = "</tbody></table>";

        let actionOverridesSection = "";
        if (data.actionOverrides && data.actionOverrides.length > 0) {
          linksSection += `<div class="item"><a href="#${tabId}-action-overrides">Action Overrides</a></div>`;

          actionOverridesSection = `<h3 class='ui header' id='${tabId}-action-overrides'>Action Overrides<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
          <table id='${tabId}-action-overrides-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Form Factor</th>
                <th>Available In Touch</th>
                <th>Action Name</th>
                <th>Page</th>
                <th>URL</th>
              </tr>
            </thead>
          </table>`;
        }

        let childRelationshipsSection = "";
        if (data.childRelationships && data.childRelationships.length > 0) {
          linksSection += `<div class="item"><a href="#${tabId}-child-relationships">Child Relationships</a></div>`;

          childRelationshipsSection = `<h3 class='ui header' id='${tabId}-child-relationships'>Child Relationships<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
          <table id='${tabId}-child-relationships-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Child Object</th>
                <th>Field</th>
                <th>Name</th>
                <th>Cascade Delete</th>
                <th>Restricted Delete</th>
                <th>Junction Object</th>
              </tr>
            </thead>
          </table>`;
        }

        let recordTypesSection = "";
        if (data.recordTypes && data.recordTypes.length > 0) {
          linksSection += `<div class="item"><a href="#${tabId}-record-types">Record Types</a></div>`;

          recordTypesSection = `<h3 class='ui header' id='${tabId}-record-types'>Record Types<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
          <table id='${tabId}-record-types-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Name</th>
                <th>Developer Name</th>
                <th>Active</th>
                <th>Description</th>
                <th>Default</th>
                <th>Available</th>
                <th>Master</th>
                <th>Compact Layout</th>
                <th>Business Process</th>
              </tr>
            </thead>
          </table>`;
        }

        // Record Type Picklist Values matrix (semantic table, not a DataTable)
        let recordTypePicklistsSection = "";
        if (data.recordTypes && data.recordTypes.length > 0) {
          const rtsWithPicklists = data.recordTypes.filter(
            (rt) =>
              Array.isArray(rt.picklistValues) && rt.picklistValues.length > 0
          );
          if (rtsWithPicklists.length > 0) {
            linksSection += `<div class="item"><a href="#${tabId}-record-type-picklists">Record Type Picklists</a></div>`;

            // Collect unique field API names across record types, then sort alphabetically
            const fieldNameSet = new Set();
            rtsWithPicklists.forEach((rt) => {
              rt.picklistValues.forEach((pv) => {
                if (pv && pv.field) {
                  fieldNameSet.add(pv.field);
                }
              });
            });
            const fieldNames = Array.from(fieldNameSet).sort((a, b) =>
              a.localeCompare(b)
            );

            // Build table header: first blank cell, then record type names as columns
            const headerCells = ["<th>Field</th>"].concat(
              rtsWithPicklists.map(
                (rt) => `<th>${rt.name || rt.developerName}</th>`
              )
            );

            // Build table body rows
            const bodyRows = fieldNames
              .map((fieldName) => {
                const cells = rtsWithPicklists.map((rt) => {
                  const match = rt.picklistValues.find(
                    (pv) => pv.field === fieldName
                  );
                  if (
                    !match ||
                    !Array.isArray(match.values) ||
                    match.values.length === 0
                  ) {
                    return "<td></td>";
                  }
                  const renderedValues = match.values
                    .map((val) => {
                      if (val && typeof val === "object" && "value" in val) {
                        const v = decodePicklistText(String(val.value));
                        return val.default ? `<b>${v}</b>` : v;
                      }
                      return decodePicklistText(String(val));
                    })
                    .join("<br/>");
                  return `<td>${renderedValues}</td>`;
                });
                return `<tr><td>${fieldName}</td>${cells.join("")}</tr>`;
              })
              .join("");

            recordTypePicklistsSection = `
              <h3 class='ui header' id='${tabId}-record-type-picklists'>Record Type Picklists<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
              <table class="ui celled table">
                <thead>
                  <tr class="header">${headerCells.join("")}</tr>
                </thead>
                <tbody>
                  ${bodyRows}
                </tbody>
              </table>`;
          }
        }

        let supportedScopesSection = "";
        if (data.supportedScopes && data.supportedScopes.length > 0) {
          linksSection += `<div class="item"><a href="#${tabId}-supported-scopes">Supported Scopes</a></div>`;

          supportedScopesSection = `<h3 class='ui header' id='${tabId}-supported-scopes'>Supported Scopes<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
          <table id='${tabId}-supported-scopes-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Label</th>
                <th>API Name</th>
              </tr>
            </thead>
          </table>`;
        }

        let validationRulesSection = "";
        if (data.validationRules && data.validationRules.length > 0) {
          linksSection += `<div class="item"><a href="#${tabId}-validation-rules">Validation Rules</a></div>`;

          validationRulesSection = `<h3 class='ui header' id='${tabId}-validation-rules'>Validation Rules<a href="#${tabId}" style="float: right; font-size: 0.8em; font-weight: normal;"><i class="up arrow icon"></i>top</a></h3>
          <table id='${tabId}-validation-rules-table' class="ui celled table">
            <thead>
              <tr class="header">
                <th>Name</th>
                <th>Active</th>
                <th>Description</th>
                <th>Formula</th>
                <th>Display Field</th>
                <th>Message</th>
              </tr>
            </thead>
          </table>`;
        }

        linksSection += `</div>`;

        return (
          topSection +
          linksSection +
          fieldsSectionHeader +
          fieldsSection +
          fieldsSectionFooter +
          actionOverridesSection +
          childRelationshipsSection +
          recordTypesSection +
          recordTypePicklistsSection +
          supportedScopesSection +
          validationRulesSection
        );
      }

      function initializeObjectDetailsDataTables(tabId, data) {
        // There are two cases: one with initialized tabId and data, and one where tabId is the identifier, and data is undefined.
        if (data === undefined) {
          data = findObjectDetails(tabId);
          tabId = getTabId(tabId);
        }

        $(`#${tabId}-fields-table`).each(function () {
          if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
            initDataTableWithButtons(
              `#${this.id}`,
              `Fields for ${data.name}`,
              true,
              true,
              {
                pageLength: 50,
              }
            );
          } else if ($.fn.dataTable.isDataTable(this)) {
            $(this).DataTable().columns.adjust();
          }
        });

        if (data.actionOverrides && data.actionOverrides.length > 0) {
          $(`#${tabId}-action-overrides-table`).each(function () {
            if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
              initDataTableWithButtons(
                `#${this.id}`,
                `Action Overrides for ${data.name}`,
                true,
                true,
                {
                  data: data.actionOverrides,
                  columns: [
                    { data: "formFactor", type: "string" },
                    { data: "isAvailableInTouch", type: "boolean" },
                    { data: "name", type: "string" },
                    { data: "page", render: renderXoomReference(true) },
                    {
                      data: "url",
                      type: "string",
                      visible: data.actionOverrides.some(
                        (override) => override.url
                      ),
                    },
                  ],
                  pageLength: 10,
                }
              );
            } else if ($.fn.DataTable.isDataTable(this)) {
              $(this).DataTable().columns.adjust();
            }
          });
        }

        if (data.childRelationships && data.childRelationships.length > 0) {
          $(`#${tabId}-child-relationships-table`).each(function () {
            if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
              initDataTableWithButtons(
                `#${this.id}`,
                `Child Relationships for ${data.name}`,
                true,
                true,
                {
                  data: data.childRelationships,
                  columns: [
                    {
                      data: "childObject",
                      render: function (value, type) {
                        if (type === "display" && value) {
                          return `<a class=\"ui primary basic label\" onclick=\"addAndDisplayDetails('${value}', false, false)\" ondblclick=\"addAndDisplayDetails('${value}', true, true)\"><i class=\"arrow right icon\"></i>${value}</a>`;
                        }
                        return value;
                      },
                    },
                    { data: "field", type: "string" },
                    {
                      data: null,
                      type: "string",
                      render: renderOptionalValue("name"),
                      visible: data.childRelationships.some(
                        (relationship) => relationship.name
                      ),
                    },
                    { data: "cascadeDelete", type: "boolean" },
                    {
                      data: null,
                      type: "boolean",
                      render: renderOptionalValue("restrictedDelete"),
                      visible: data.childRelationships.some(
                        (relationship) => relationship.restrictedDelete
                      ),
                    },
                    {
                      data: null,
                      type: "string",
                      render: renderJunction,
                      visible: data.childRelationships.some(
                        (relationship) => relationship.junction
                      ),
                    },
                  ],
                  pageLength: 10,
                }
              );
            } else if ($.fn.DataTable.isDataTable(this)) {
              $(this).DataTable().columns.adjust();
            }
          });
        }

        if (data.recordTypes && data.recordTypes.length > 0) {
          $(`#${tabId}-record-types-table`).each(function () {
            if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
              initDataTableWithButtons(
                `#${this.id}`,
                `Record Types for ${data.name}`,
                true,
                true,
                {
                  data: data.recordTypes,
                  columns: [
                    { data: "name", type: "string" },
                    { data: "developerName", type: "string" },
                    { data: "active", type: "boolean" },
                    {
                      data: null,
                      type: "string",
                      render: renderOptionalValue("description"),
                      visible: data.recordTypes.some(
                        (recordType) => recordType.description
                      ),
                    },
                    {
                      data: null,
                      type: "boolean",
                      render: renderOptionalValue("default"),
                    },
                    {
                      data: null,
                      type: "boolean",
                      render: renderOptionalValue("available"),
                      visible: data.recordTypes.some(
                        (recordType) => recordType.available
                      ),
                    },
                    {
                      data: null,
                      type: "boolean",
                      render: renderOptionalValue("master"),
                      visible: data.recordTypes.some(
                        (recordType) => recordType.master
                      ),
                    },
                    {
                      data: null,
                      type: "boolean",
                      render: renderOptionalValue("compactLayout"),
                      visible: data.recordTypes.some(
                        (recordType) => recordType.compactLayout
                      ),
                    },
                    {
                      data: null,
                      type: "string",
                      render: renderOptionalValue("businessProcess"),
                      visible: data.recordTypes.some(
                        (recordType) => recordType.businessProcess
                      ),
                    },
                  ],
                  pageLength: 10,
                }
              );
            } else if ($.fn.DataTable.isDataTable(this)) {
              $(this).DataTable().columns.adjust();
            }
          });
        }

        if (data.supportedScopes && data.supportedScopes.length > 0) {
          $(`#${tabId}-supported-scopes-table`).each(function () {
            if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
              initDataTableWithButtons(
                `#${this.id}`,
                `Supported Scopes for ${data.name}`,
                true,
                true,
                {
                  data: data.supportedScopes,
                  columns: [
                    { data: "label", type: "string" },
                    { data: "name", type: "string" },
                  ],
                  pageLength: 10,
                }
              );
            } else if ($.fn.DataTable.isDataTable(this)) {
              $(this).DataTable().columns.adjust();
            }
          });
        }

        if (data.validationRules && data.validationRules.length > 0) {
          $(`#${tabId}-validation-rules-table`).each(function () {
            if ($.fn.dataTable && !$.fn.dataTable.isDataTable(this)) {
              initDataTableWithButtons(
                `#${this.id}`,
                `Validation Rules for ${data.name}`,
                true,
                true,
                {
                  data: data.validationRules,
                  columns: [
                    { data: "name", render: renderValidationRuleName },
                    { data: "active", type: "boolean", visible: false },
                    {
                      data: "description",
                      type: "string",
                      visible: false,
                    },
                    {
                      data: "errorConditionFormula",
                      render: renderSalesforceFormula(true, true),
                    },
                    {
                      data: "errorDisplayField",
                      type: "string",
                    },
                    {
                      data: "errorMessage",
                      type: "string",
                    },
                  ],
                  pageLength: 50,
                }
              );
            } else if ($.fn.DataTable.isDataTable(this)) {
              $(this).DataTable().columns.adjust();
            }
          });
        }
      }

      function cleanupObjectDetailsDataTables(tabId) {
        [
          `#${tabId}-fields-table`,
          `#${tabId}-action-overrides-table`,
          `#${tabId}-child-relationships-table`,
          `#${tabId}-record-types-table`,
          `#${tabId}-supported-scopes-table`,
          `#${tabId}-validation-rules-table`,
        ].map((selector) => {
          if ($.fn.DataTable.isDataTable(selector)) {
            $(selector).DataTable().destroy();
          }
        });
      }

      // Create tabbed details manager for object schema
      const objectSchemaTabManager = createTabbedDetailsManager({
        generateContent: generateObjectDetailsHtml,
        initializeContent: initializeObjectDetailsDataTables,
        cleanupContent: cleanupObjectDetailsDataTables,
        getTabId: getTabId,
        findData: findObjectDetails,
        notFoundMessage: 'Object "{identifier}" not found.',
      });

      // Extract the functions for use in click handlers
      const { displayDetails, addAndDisplayDetails, closeTab } =
        objectSchemaTabManager;

      function findObjectDetails(name) {
        return data.find((row) => row.name === name);
      }

      function getTabId(name) {
        return `tab-obj-${name.replace(/[@\.]/g, "_")}`;
      }

      $(document).ready(function () {
        const colTable = initDataTableWithButtons(
          "#collectionsTable",
          "Salesforce SObjects",
          true,
          true,
          {
            data: data,
            columns: [
              { data: "name", render: renderObjectName },
              { data: "label" },
              { data: "keyPrefix" },
              { data: null, render: renderPropertyCount("fields") },
              {
                data: null,
                type: "num",
                render: renderPropertyCount("actionOverrides"),
              },
              {
                data: null,
                type: "num",
                render: renderPropertyCount("childRelationships"),
              },
              {
                data: null,
                type: "num",
                render: renderPropertyCount("recordTypes"),
              },
              {
                data: null,
                type: "num",
                render: renderPropertyCount("supportedScopes"),
              },
              {
                data: null,
                type: "num",
                render: renderPropertyCount("validationRules"),
              },
              { data: "customObject", visible: false },
            ],
          }
        );

        let clickTimer = null;
        $("#collectionsTable tbody").on("click", "tr", function () {
          const objName = $(this).find(".name").text();
          if (clickTimer) {
            clearTimeout(clickTimer);
            clickTimer = null;
            // Do nothing here; dblclick will handle
          } else {
            clickTimer = setTimeout(() => {
              displayDetails(objName); // single-click
              clickTimer = null;
            }, 300);
          }
        });

        $("#collectionsTable tbody").on("dblclick", "tr", function (e) {
          e.preventDefault();
          if (clickTimer) {
            clearTimeout(clickTimer);
            clickTimer = null;
          }
          const objName = $(this).find(".name").text();
          addAndDisplayDetails(objName, true, false); // double-click
        });

        $(".menu .item").tab({
          onVisible: initializeObjectDetailsDataTables,
        });
      });
    </script>
  </body>
</html>
